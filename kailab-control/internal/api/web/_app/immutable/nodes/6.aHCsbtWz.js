import{d as st,f as p,a as u,c as rt,s as y}from"../chunks/D97pvdqL.js";import{p as ot,s as f,a as it,o as nt,f as G,b as s,c as o,d as dt,e as a,r as e,g as i,t as O}from"../chunks/CTLX4DFP.js";import{i as g}from"../chunks/CKEv9aRo.js";import{e as lt,i as vt}from"../chunks/Jok9RVQw.js";import{r as ct}from"../chunks/D_eJfhWT.js";import{b as ut}from"../chunks/BRtObZfD.js";import{g as mt}from"../chunks/B3eGzpKX.js";import{l as _t,a as P}from"../chunks/DvCCnLMi.js";var bt=p('<div class="text-center py-12 text-kai-text-muted">Loading...</div>'),pt=p('<div class="card text-center py-12"><div class="text-5xl mb-4">ðŸ”‘</div> <p class="text-kai-text-muted mb-4">No API tokens yet</p> <button class="btn btn-primary">Create your first token</button></div>'),ft=p('<div class="list-item"><div><span class="font-medium"> </span> <span class="text-kai-text-muted ml-2"> </span></div> <div class="flex items-center gap-4"><span class="text-kai-text-muted text-xs"> </span> <button class="btn">Delete</button></div></div>'),kt=p('<div class="card p-0"></div>'),xt=p('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50" role="button" tabindex="0"><div class="bg-kai-bg-secondary border border-kai-border rounded-xl p-6 max-w-md w-11/12" role="dialog"><h3 class="text-lg font-semibold mb-4">Create API Token</h3> <div class="mb-4"><label for="token-name" class="block mb-2 font-medium">Name</label> <input type="text" id="token-name" class="input" placeholder="My CLI token"/></div> <div class="flex justify-end gap-2 mt-6"><button class="btn">Cancel</button> <button class="btn btn-primary">Create</button></div></div></div>'),yt=p(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div class="bg-kai-bg-secondary border border-kai-border rounded-xl p-6 max-w-md w-11/12"><h3 class="text-lg font-semibold mb-4">Token Created</h3> <div class="alert alert-success">Copy this token now! It won't be shown again.</div> <div class="code-block break-all"><code> </code></div> <div class="flex justify-end mt-6"><button class="btn btn-primary">Copy & Close</button></div></div></div>`),gt=p('<div class="max-w-6xl mx-auto px-5 py-8"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-semibold">API Tokens</h2> <button class="btn btn-primary">New Token</button></div> <!></div> <!> <!>',1);function Lt(U,q){ot(q,!0);let w=f(it([])),h=f(!0),m=f(!1),T=f(!1),k=f(""),x=f("");nt(async()=>{if(!await _t()){mt("/login");return}await C()});async function C(){s(h,!0);const t=await P("GET","/api/v1/tokens");s(w,t.tokens||[],!0),s(h,!1)}async function B(){const t=await P("POST","/api/v1/tokens",{name:i(k),scopes:["repo:read","repo:write"]});if(t.error){alert(t.error);return}s(x,t.token,!0),s(m,!1),s(T,!0),s(k,"")}async function F(t){confirm("Are you sure you want to delete this token?")&&(await P("DELETE",`/api/v1/tokens/${t}`),await C())}function H(){navigator.clipboard.writeText(i(x)),s(T,!1),s(x,""),C()}var D=gt(),j=G(D),A=a(j),J=o(a(A),2);J.__click=()=>s(m,!0),e(A);var K=o(A,2);{var Q=t=>{var r=bt();u(t,r)},R=t=>{var r=rt(),v=G(r);{var c=d=>{var n=pt(),b=o(a(n),4);b.__click=()=>s(m,!0),e(n),u(d,n)},_=d=>{var n=kt();lt(n,21,()=>i(w),vt,(b,l)=>{var E=ft(),I=a(E),L=a(I),Y=a(L,!0);e(L);var z=o(L,2),Z=a(z,!0);e(z),e(I);var S=o(I,2),N=a(S),$=a(N,!0);e(N);var tt=o(N,2);tt.__click=()=>F(i(l).id),e(S),e(E),O((et,at)=>{y(Y,i(l).name),y(Z,et),y($,at)},[()=>i(l).scopes.join(", "),()=>i(l).last_used_at?"Last used: "+new Date(i(l).last_used_at).toLocaleDateString():"Never used"]),u(b,E)}),e(n),u(d,n)};g(v,d=>{i(w).length===0?d(c):d(_,!1)},!0)}u(t,r)};g(K,t=>{i(h)?t(Q):t(R,!1)})}e(j);var M=o(j,2);{var V=t=>{var r=xt();r.__click=()=>s(m,!1),r.__keydown=l=>l.key==="Escape"&&s(m,!1);var v=a(r);v.__click=l=>l.stopPropagation(),v.__keydown=()=>{};var c=o(a(v),2),_=o(a(c),2);ct(_),e(c);var d=o(c,2),n=a(d);n.__click=()=>s(m,!1);var b=o(n,2);b.__click=B,e(d),e(v),e(r),ut(_,()=>i(k),l=>s(k,l)),u(t,r)};g(M,t=>{i(m)&&t(V)})}var W=o(M,2);{var X=t=>{var r=yt(),v=a(r),c=o(a(v),4),_=a(c),d=a(_,!0);e(_),e(c);var n=o(c,2),b=a(n);b.__click=H,e(n),e(v),e(r),O(()=>y(d,i(x))),u(t,r)};g(W,t=>{i(T)&&t(X)})}u(U,D),dt()}st(["click","keydown"]);export{Lt as component};
