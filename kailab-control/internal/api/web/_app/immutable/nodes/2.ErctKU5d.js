import{d as X,f as _,a as u,c as Z,s as N}from"../chunks/VjLQPky2.js";import{p as $,s as x,a as aa,o as ta,f as P,b as e,c as i,d as ea,e as s,r as t,g as r,n as sa,t as ra}from"../chunks/BVvwDgQW.js";import{i as j}from"../chunks/CsNQXS2_.js";import{e as ia,i as oa}from"../chunks/BLKh8Udd.js";import{r as T}from"../chunks/DPqGiUMl.js";import{b as G}from"../chunks/CrG6ooIi.js";import{g as U}from"../chunks/CQNZviiM.js";import{l as na,a as Y}from"../chunks/D61sAI1O.js";var la=_('<div class="text-center py-12 text-kai-text-muted">Loading...</div>'),ca=_('<div class="card text-center py-12"><div class="text-5xl mb-4">üìÅ</div> <p class="text-kai-text-muted mb-4">No organizations yet</p> <button class="btn btn-primary">Create your first organization</button></div>'),da=_('<button class="list-item w-full text-left"><div><span class="font-medium text-kai-accent"> </span> <span class="text-kai-text-muted ml-2"> </span></div> <span class="badge"> </span></button>'),va=_('<div class="card p-0"></div>'),ua=_('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50" role="button" tabindex="0"><div class="bg-kai-bg-secondary border border-kai-border rounded-xl p-6 max-w-md w-11/12" role="dialog"><h3 class="text-lg font-semibold mb-4">Create Organization</h3> <div class="mb-4"><label for="org-slug" class="block mb-2 font-medium">Slug</label> <input type="text" id="org-slug" class="input" placeholder="my-org" pattern="[a-z0-9._-]+"/> <small class="text-kai-text-muted">Lowercase letters, numbers, hyphens, underscores</small></div> <div class="mb-4"><label for="org-name" class="block mb-2 font-medium">Name</label> <input type="text" id="org-name" class="input" placeholder="My Organization"/></div> <div class="flex justify-end gap-2 mt-6"><button class="btn">Cancel</button> <button class="btn btn-primary">Create</button></div></div></div>'),ma=_('<div class="max-w-6xl mx-auto px-5 py-8"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-semibold">Your Organizations</h2> <button class="btn btn-primary">New Organization</button></div> <!></div> <!>',1);function wa(q,A){$(A,!0);let w=x(aa([])),h=x(!0),d=x(!1),f=x(""),y=x("");ta(async()=>{if(!await na()){U("/login");return}await M()});async function M(){e(h,!0);const a=await Y("GET","/api/v1/orgs");e(w,a.orgs||[],!0),e(h,!1)}async function B(){const a=await Y("POST","/api/v1/orgs",{slug:r(f),name:r(y)||r(f)});if(a.error){alert(a.error);return}e(d,!1),e(f,""),e(y,""),await M()}function D(a){U(`/orgs/${a}`)}var S=ma(),O=P(S),z=s(O),F=i(s(z),2);F.__click=()=>e(d,!0),t(z);var H=i(z,2);{var I=a=>{var n=la();u(a,n)},J=a=>{var n=Z(),m=P(n);{var g=l=>{var c=ca(),p=i(s(c),4);p.__click=()=>e(d,!0),t(c),u(l,c)},k=l=>{var c=va();ia(c,21,()=>r(w),oa,(p,v)=>{var b=da();b.__click=()=>D(r(v).slug);var o=s(b),C=s(o),R=s(C,!0);t(C);var E=i(C,2),V=s(E);t(E),t(o);var L=i(o,2),W=s(L,!0);t(L),t(b),ra(()=>{N(R,r(v).name),N(V,`/${r(v).slug??""}`),N(W,r(v).plan)}),u(p,b)}),t(c),u(l,c)};j(m,l=>{r(w).length===0?l(g):l(k,!1)},!0)}u(a,n)};j(H,a=>{r(h)?a(I):a(J,!1)})}t(O);var K=i(O,2);{var Q=a=>{var n=ua();n.__click=()=>e(d,!1),n.__keydown=o=>o.key==="Escape"&&e(d,!1);var m=s(n);m.__click=o=>o.stopPropagation(),m.__keydown=()=>{};var g=i(s(m),2),k=i(s(g),2);T(k),sa(2),t(g);var l=i(g,2),c=i(s(l),2);T(c),t(l);var p=i(l,2),v=s(p);v.__click=()=>e(d,!1);var b=i(v,2);b.__click=B,t(p),t(m),t(n),G(k,()=>r(f),o=>e(f,o)),G(c,()=>r(y),o=>e(y,o)),u(a,n)};j(K,a=>{r(d)&&a(Q)})}u(q,S),ea()}X(["click","keydown"]);export{wa as component};
