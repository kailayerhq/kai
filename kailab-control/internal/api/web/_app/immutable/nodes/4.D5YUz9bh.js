import{d as Z,f as g,a as u,s as E,c as aa}from"../chunks/D97pvdqL.js";import{p as ta,s as y,a as ea,u as sa,o as ra,f as V,b as s,c as r,t as G,d as ia,e,r as t,g as i,n as oa}from"../chunks/CTLX4DFP.js";import{i as L}from"../chunks/CKEv9aRo.js";import{e as la,i as na}from"../chunks/Jok9RVQw.js";import{r as va}from"../chunks/D_eJfhWT.js";import{p as ca,b as pa,s as da}from"../chunks/C4hoRL7L.js";import{b as ma}from"../chunks/BRtObZfD.js";import{s as ua,a as ba}from"../chunks/CgNDnF7i.js";import{g as M}from"../chunks/B3eGzpKX.js";import{c as _a,l as fa,a as S}from"../chunks/DvCCnLMi.js";var ga=g('<div class="text-center py-12 text-kai-text-muted">Loading...</div>'),xa=g('<div class="card text-center py-12"><div class="text-5xl mb-4">ðŸ“¦</div> <p class="text-kai-text-muted mb-4">No repositories yet</p> <button class="btn btn-primary">Create your first repository</button></div>'),ya=g('<button class="list-item w-full text-left"><div><span class="font-medium text-kai-accent"> </span></div> <span> </span></button>'),ka=g('<div class="card p-0"></div>'),wa=g('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50" role="button" tabindex="0"><div class="bg-kai-bg-secondary border border-kai-border rounded-xl p-6 max-w-md w-11/12" role="dialog"><h3 class="text-lg font-semibold mb-4">Create Repository</h3> <div class="mb-4"><label for="repo-name" class="block mb-2 font-medium">Name</label> <input type="text" id="repo-name" class="input" placeholder="my-repo" pattern="[a-z0-9._-]+"/> <small class="text-kai-text-muted">Lowercase letters, numbers, hyphens, underscores</small></div> <div class="mb-4"><label for="repo-visibility" class="block mb-2 font-medium">Visibility</label> <select id="repo-visibility" class="input"><option>Private</option><option>Public</option></select></div> <div class="flex justify-end gap-2 mt-6"><button class="btn">Cancel</button> <button class="btn btn-primary">Create</button></div></div></div>'),ha=g('<div class="max-w-6xl mx-auto px-5 py-8"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-semibold"> </h2> <button class="btn btn-primary">New Repository</button></div> <!></div> <!>',1);function Oa(U,q){ta(q,!0);const b=()=>ua(ca,"$page",A),[A,B]=ba();let R=y(ea([])),C=y(!0),c=y(!1),k=y(""),w=y("private");sa(()=>{_a.set(b().params.slug)}),ra(async()=>{if(!await fa()){M("/login");return}await O()});async function O(){s(C,!0);const a=await S("GET",`/api/v1/orgs/${b().params.slug}/repos`);s(R,a.repos||[],!0),s(C,!1)}async function D(){const a=await S("POST",`/api/v1/orgs/${b().params.slug}/repos`,{name:i(k),visibility:i(w)});if(a.error){alert(a.error);return}s(c,!1),s(k,""),s(w,"private"),await O(),M(`/orgs/${b().params.slug}/${a.name}`)}function F(a){M(`/orgs/${b().params.slug}/${a}`)}var T=ha(),N=V(T),P=e(N),j=e(P),H=e(j,!0);t(j);var I=r(j,2);I.__click=()=>s(c,!0),t(P);var J=r(P,2);{var K=a=>{var l=ga();u(a,l)},Q=a=>{var l=aa(),_=V(l);{var x=n=>{var o=xa(),p=r(e(o),4);p.__click=()=>s(c,!0),t(o),u(n,o)},h=n=>{var o=ka();la(o,21,()=>i(R),na,(p,d)=>{var m=ya();m.__click=()=>F(i(d).name);var f=e(m),$=e(f),v=e($,!0);t($),t(f);var z=r(f,2),Y=e(z,!0);t(z),t(m),G(()=>{E(v,i(d).name),da(z,1,`badge badge-${i(d).visibility??""}`),E(Y,i(d).visibility)}),u(p,m)}),t(o),u(n,o)};L(_,n=>{i(R).length===0?n(x):n(h,!1)},!0)}u(a,l)};L(J,a=>{i(C)?a(K):a(Q,!1)})}t(N);var W=r(N,2);{var X=a=>{var l=wa();l.__click=()=>s(c,!1),l.__keydown=v=>v.key==="Escape"&&s(c,!1);var _=e(l);_.__click=v=>v.stopPropagation(),_.__keydown=()=>{};var x=r(e(_),2),h=r(e(x),2);va(h),oa(2),t(x);var n=r(x,2),o=r(e(n),2),p=e(o);p.value=p.__value="private";var d=r(p);d.value=d.__value="public",t(o),t(n);var m=r(n,2),f=e(m);f.__click=()=>s(c,!1);var $=r(f,2);$.__click=D,t(m),t(_),t(l),ma(h,()=>i(k),v=>s(k,v)),pa(o,()=>i(w),v=>s(w,v)),u(a,l)};L(W,a=>{i(c)&&a(X)})}G(()=>E(H,b().params.slug)),u(U,T),ia(),B()}Z(["click","keydown"]);export{Oa as component};
